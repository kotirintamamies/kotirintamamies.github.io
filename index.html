<!DOCTYPE html>
<html ng-app="app">
  <head>
    <link rel="stylesheet" type = "text/css" href="css/stylesheet.css" />

    <title>Sebastian Laitila's homepage</title>

  </head>
  <body ng-controller="main">
    <center><h1 ng-click="changeposition({x:0, y:0, z:0})">Sebastian Laitila</h1></center>
    <center>
      <h2 > <a ng-click="changeposition({x:1200, y:0, z:900})"> testi </a>|
      <a ng-click="changeposition({x:-1400, y:0, z:-800})"> testi </a>|
      <a ng-click="changeposition({x:1200, y:0, z:2000})"> testi </a></h2>

    </center>
    <div id="scene"></div>
    <script src="js/angular.min.js"></script>
    <script src="js/three.min.js"></script>
    <script src="ng-app.js"></script>
    <script>
    var camera, spotlight, scene, renderer;
var geometry, material, mesh;
var currentPosition = {x: 2000, z: 0}
var endPosition = {x: 0, z: 0}
var objects =
[
{content: "Welcome to my homepage!", position: {x: 0, y: 50, z: 0}},
{content: "Testing features!", position: {x: 1200, y: 50, z: 900}},
{content: "This is a menu item!", position: {x: -1400, y: 50, z: -800}},
{content: "This is another menu item!", position: {x: 1200, y: 50, z: 2000}},
]
init();
animate();



function maketext (content, position)
{
  var loader = new THREE.FontLoader();
  loader.load('https://kotirintamamies.github.io/js/font.json', function(font)
  {
      var text = new THREE.TextGeometry(content, { size: 60, font: font,  height: 4});
      var textMaterial = new THREE.MeshPhongMaterial( { color: 0x40FFff, shading: THREE.FlatShading} );
      var textMesh = new THREE.Mesh(text, textMaterial)
      var text_bbox = new THREE.Box3();


      text_bbox.setFromObject(textMesh);
      textMesh.position.z = position.z-300;
      textMesh.position.x = position.x-(text_bbox.min.x+text_bbox.max.x)/2;
      textMesh.position.y = position.y;
      scene.add(textMesh);

  })
}

function init() {

    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);
    camera.position.z = 2000;
    camera.position.y = 80;
    spotlight = new THREE.PointLight(0xFFFFFF, 1, 1500, 1)
    spotlight.position.set(0,0,0)
    scene = new THREE.Scene();
    objects.forEach(function(obj) {maketext(obj.content, obj.position);})


    scene.fog = new THREE.FogExp2( 0x000000, 0.0028 );

    sun = new THREE.SphereGeometry(1000, 10, 10);


    material = new THREE.MeshBasicMaterial({
        color: 0xffBB00,
        wireframe: false, fog: false   });

    mesh = new THREE.Mesh(sun, material);
    var grid = new THREE.GridHelper( 2000, 100 ,0xFF00FF, 0xFF00FF);




    mesh.position.z = -4000;
    mesh.position.y = 1500;






    scene.add(mesh);
    scene.add(grid);

    var light = new THREE.AmbientLight( 0x404040 );
    scene.add(light);
    scene.add(spotlight);
    renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);

    var container = document.getElementById('scene')
    container.appendChild(renderer.domElement);

}




function getMovement(current, end)
{
  return (end-current)/20
}

function animate() {

    requestAnimationFrame(animate);
    currentPosition.x = camera.position.x;
    currentPosition.z = camera.position.z;

    if (currentPosition.x<endPosition.x-0.1) currentPosition.x+=getMovement(currentPosition.x, endPosition.x);
    if (currentPosition.x>endPosition.x+0.1) currentPosition.x+=getMovement(currentPosition.x, endPosition.x);
    if (currentPosition.z<endPosition.z-0.1) currentPosition.z+=getMovement(currentPosition.z, endPosition.z);
    if (currentPosition.z>endPosition.z+0.1) currentPosition.z+=getMovement(currentPosition.z, endPosition.z);

    camera.position.x = currentPosition.x;
    camera.position.z = currentPosition.z;
    spotlight.position.set(camera.position.x, camera.position.y, camera.position.z);
   // mesh.rotation.x += 0.01;
   // mesh.rotation.y += 0.02;

    renderer.render(scene, camera);

}
    </script>
  </body>
</html>
